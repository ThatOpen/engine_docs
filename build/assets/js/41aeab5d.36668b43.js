"use strict";(self.webpackChunkengine_docs=self.webpackChunkengine_docs||[]).push([[1750],{5857:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>h});var n=r(4848),i=r(8453);const o={sidebar_position:2},s="\ud83e\uddbe Building your own exporter/importer",a={id:"fragments/custom-building",title:"\ud83e\uddbe Building your own exporter/importer",description:"\ud83c\udfaf Introduction",source:"@site/docs/fragments/custom-building.md",sourceDirName:"fragments",slug:"/fragments/custom-building",permalink:"/fragments/custom-building",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"\ud83e\udde9 The schema",permalink:"/fragments/schema"},next:{title:"Components",permalink:"/Tutorials/Components/"}},l={},h=[{value:"\ud83c\udfaf Introduction",id:"-introduction",level:2},{value:"\u270d\ud83c\udffb Creating a Fragments exporter/importer",id:"-creating-a-fragments-exporterimporter",level:2},{value:"\u2b07\ufe0f Importing Fragments",id:"\ufe0f-importing-fragments",level:3},{value:"\u2197\ufe0f Exporting Fragments",id:"\ufe0f-exporting-fragments",level:3}];function c(e){const t={a:"a",admonition:"admonition",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"-building-your-own-exporterimporter",children:"\ud83e\uddbe Building your own exporter/importer"}),"\n",(0,n.jsx)(t.h2,{id:"-introduction",children:"\ud83c\udfaf Introduction"}),"\n",(0,n.jsxs)(t.p,{children:["Fragments is built on top of ",(0,n.jsx)(t.a,{href:"https://flatbuffers.dev/",children:"Flatbuffers"}),", which allow to create ",(0,n.jsx)(t.strong,{children:"binary formats that are compatible with over 15 programming languages"}),". In a nutshell, this is what you can do: \ud83d\udc47\ud83c\udffb"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["\ud83c\udf1d You can ",(0,n.jsx)(t.strong,{children:"automatically create a fragments importer / exporter"}),", allowing you to ",(0,n.jsx)(t.strong,{children:"read / write Fragments files"})," created by you, by us or by other developers."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["\ud83c\udf1a You ",(0,n.jsx)(t.strong,{children:"can't have our powerful 3D viewer / BIM tools"})," in your programming language, because we created all that in JavaScript / TypeScript. That said, JavaScript / TypeScript is one of the most flexible stacks nowadays, so if you want our 3D technology, ",(0,n.jsx)(t.strong,{children:"there's a good chance you can embed it in your app"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"That said, let's get started! \ud83d\ude80"}),"\n",(0,n.jsx)(t.h2,{id:"-creating-a-fragments-exporterimporter",children:"\u270d\ud83c\udffb Creating a Fragments exporter/importer"}),"\n",(0,n.jsxs)(t.p,{children:["To create your own Fragments exporter / importer ",(0,n.jsx)(t.strong,{children:"you just need to do 3 things"}),":"]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["\ud83d\udcc3 ",(0,n.jsx)(t.strong,{children:"Download the Fragments schema file"}),", which you can find ",(0,n.jsx)(t.a,{href:"https://github.com/ThatOpen/engine_fragment/blob/main/packages/fragments/flatbuffers/index.fbs",children:"here"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["\ud83e\udd16 ",(0,n.jsx)(t.strong,{children:"Download the flatbuffers executable file"})," from ",(0,n.jsx)(t.a,{href:"https://github.com/google/flatbuffers/releases/tag/v25.2.10",children:"their official release page"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["\u25b6\ufe0f ",(0,n.jsx)(t.strong,{children:"Execute the flatbuffers executable"})," using a terminal (e.g. VS Code terminal) passing the path of the .fbs file and the language you want to work with. You can find an example for each supported language ",(0,n.jsx)(t.a,{href:"https://flatbuffers.dev/tutorial/#compiling-schema",children:"here"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["If you did everything right, you should now ",(0,n.jsx)(t.strong,{children:"have your own Fragment importer / exporter"})," in your programming language. In short: you can start reading and writting fragments! We'll give you some pointers to do this in the following points. \ud83e\udd73"]}),"\n",(0,n.jsxs)(t.admonition,{title:"Beware: flatbuffers are strict",type:"tip",children:[(0,n.jsxs)(t.p,{children:["If you use a low level programming language like ",(0,n.jsx)(t.strong,{children:"C"}),", ",(0,n.jsx)(t.strong,{children:"C++"})," or ",(0,n.jsx)(t.strong,{children:"Rust"}),", flatbuffers will ",(0,n.jsx)(t.strong,{children:"feel like home"}),". Feel free to skip this section. But if you use a flexible programming language like ",(0,n.jsx)(t.strong,{children:"Python"})," or ",(0,n.jsx)(t.strong,{children:"JavaScript"}),", flatbuffers may be a bit weird for you. \ud83d\udc40"]}),(0,n.jsxs)(t.p,{children:["The main reason is because flatbuffers are ",(0,n.jsx)(t.strong,{children:"very strict"})," when reading and creating files. In languages like JavaScript or Python you can declare objects or arrays and then extend or shrink them at will, twist variable types as you like and pretty much do anything you can think of. Flatbuffers are strict and rigid. You really have to stick to their data types and follow their rules to make them work. But hey, ",(0,n.jsx)(t.strong,{children:"in exchange for this strictness, you'll get blazing speed!"})," \ud83d\ude80\ud83d\ude80\ud83d\ude80"]})]}),"\n",(0,n.jsx)(t.h3,{id:"\ufe0f-importing-fragments",children:"\u2b07\ufe0f Importing Fragments"}),"\n",(0,n.jsxs)(t.p,{children:["The very first thing you should to to familiarize yourself with Fragments and flatbuffers is ",(0,n.jsx)(t.strong,{children:"reading an existing fragments file"}),". You can find some in our repositories, but our recommendation is that you ",(0,n.jsx)(t.strong,{children:"download the simple wall"})," from the ",(0,n.jsx)(t.a,{href:"./schema#-check-it-out",children:"schema example"})," (just press the wall button and then the download button). You can also load your own IFC file there to get its fragment file and download it. \ud83c\udfc3\ud83c\udffb\u200d\u2642\ufe0f"]}),"\n",(0,n.jsxs)(t.p,{children:["Now you can follow the ",(0,n.jsx)(t.a,{href:"https://flatbuffers.dev/tutorial/#deserialization",children:"flatbuffers reading tutorial"})," (in your programming language) to ",(0,n.jsx)(t.strong,{children:"read the file and traverse all the information inside it"}),". If you do it well, you should be able to see the same things that you see in the schema live example. \ud83d\ude80"]}),"\n",(0,n.jsx)(t.h3,{id:"\ufe0f-exporting-fragments",children:"\u2197\ufe0f Exporting Fragments"}),"\n",(0,n.jsxs)(t.p,{children:["Once you are able to read a fragments file successfully and have familiarized yourself with the flatbuffers API, you should be ",(0,n.jsx)(t.strong,{children:"ready to export your own fragments files"}),". To do this, you'll need to study and understand ",(0,n.jsx)(t.a,{href:"./schema",children:"the schema"})," if you haven't already, as well as the ",(0,n.jsx)(t.a,{href:"https://flatbuffers.dev/tutorial/#serialization",children:"flatbuffers docs for exporting"}),". \ud83d\udcda"]}),"\n",(0,n.jsxs)(t.p,{children:["As a reference you can ",(0,n.jsx)(t.strong,{children:"check out our IFC - Fragment exporter in typescript"}),". It has quite a number of pieces because extracting the data from IFC is not easy, but if you pay close attention to ",(0,n.jsx)(t.a,{href:"https://github.com/ThatOpen/engine_fragment/blob/main/packages/fragments/src/Importers/IfcImporter/src/geometry/index.ts",children:"this file for geometry"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/ThatOpen/engine_fragment/blob/main/packages/fragments/src/Importers/IfcImporter/src/properties/property-processor.ts",children:"this file for properties"})," and ",(0,n.jsx)(t.a,{href:"https://github.com/ThatOpen/engine_fragment/blob/main/packages/fragments/src/Importers/IfcImporter/index.ts",children:"this file to build the model with the other 2"}),", you'll get the feeling of exporting with flatbuffers. \ud83e\uddd1\ud83c\udffb\u200d\ud83d\udcbb"]}),"\n",(0,n.jsxs)(t.p,{children:["We might make more examples in the future, but ",(0,n.jsx)(t.strong,{children:"this should be enough to build your exporter"}),"! \ud83d\udc4f\ud83c\udffb"]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>s,x:()=>a});var n=r(6540);const i={},o=n.createContext(i);function s(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);