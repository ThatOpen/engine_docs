"use strict";(self.webpackChunkengine_docs=self.webpackChunkengine_docs||[]).push([[398],{6695:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var o=t(4848),a=t(8453);const r={},i=void 0,s={id:"Tutorials/UserInterface/OBC/ItemsData",title:"ItemsData",description:'window.open("https://thatopen.github.io/engine_ui-components/examples/ItemsData")} >Go Full Screen',source:"@site/docs/Tutorials/UserInterface/OBC/ItemsData.mdx",sourceDirName:"Tutorials/UserInterface/OBC",slug:"/Tutorials/UserInterface/OBC/ItemsData",permalink:"/Tutorials/UserInterface/OBC/ItemsData",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Searching",permalink:"/Tutorials/UserInterface/Core/Table/Searching"},next:{title:"ModelsList",permalink:"/Tutorials/UserInterface/OBC/ModelsList"}},l={},p=[{value:"Displaying data the simplest way \ud83d\udd25\ud83d\udd25",id:"displaying-data-the-simplest-way-",level:2},{value:"\ud83d\udd96 Importing our Libraries",id:"-importing-our-libraries",level:3},{value:"\ud83d\udccb Initializing the UI",id:"-initializing-the-ui",level:3},{value:"\ud83c\udf0e Setting up a simple scene",id:"-setting-up-a-simple-scene",level:3},{value:"Setting up the components",id:"setting-up-the-components",level:3},{value:"Creating the properties table",id:"creating-the-properties-table",level:3},{value:"Creating a panel to append the table",id:"creating-a-panel-to-append-the-table",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)("iframe",{src:"https://thatopen.github.io/engine_ui-components/examples/ItemsData"}),(0,o.jsx)("button",{class:"full-screen-btn",onClick:()=>window.open("https://thatopen.github.io/engine_ui-components/examples/ItemsData"),children:"Go Full Screen"})]}),"\n",(0,o.jsx)(n.admonition,{title:"Source",type:"info",children:(0,o.jsxs)(n.p,{children:["Copying and pasting? We've got you covered! You can find the full source code of this tutorial ",(0,o.jsx)(n.a,{href:"https://github.com/ThatOpen/engine_ui-components/blob/main/packages/obc/src/components/tables/ItemsData/example.ts",children:"here"}),"."]})}),"\n",(0,o.jsx)(n.h2,{id:"displaying-data-the-simplest-way-",children:"Displaying data the simplest way \ud83d\udd25\ud83d\udd25"}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"What is a good BIM app if you don't give users a nice way to visualize its model properties, right? Well, hold tight as here you will learn all you need to know in order to use the power of UI Components to accomplish that!"}),"\n",(0,o.jsx)(n.h3,{id:"-importing-our-libraries",children:"\ud83d\udd96 Importing our Libraries"}),"\n",(0,o.jsx)(n.p,{children:"In this tutorial, we will import:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"@thatopen/ui to add some simple and cool UI menus."}),"\n",(0,o.jsx)(n.li,{children:"@thatopen/components to set up the barebone of our app."}),"\n",(0,o.jsx)(n.li,{children:"@thatopen/components-front to use some frontend-oriented components."}),"\n",(0,o.jsx)(n.li,{children:"@thatopen/ui-obc to add some cool pre-made UI menus for components."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'import * as BUI from "@thatopen/ui";\nimport * as OBC from "@thatopen/components";\nimport * as OBCF from "@thatopen/components-front";\n// You have to import from "@thatopen/ui-obc"\nimport * as BUIC from "../..";\n'})}),"\n",(0,o.jsx)(n.h3,{id:"-initializing-the-ui",children:"\ud83d\udccb Initializing the UI"}),"\n",(0,o.jsx)(n.p,{children:"As always, let's first initialize the UI library. Remember you only have to do it once in your entire app."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"BUI.Manager.init();\n"})}),"\n",(0,o.jsx)(n.h3,{id:"-setting-up-a-simple-scene",children:"\ud83c\udf0e Setting up a simple scene"}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"We will start by creating a simple scene with a camera and a renderer. If you don't know how to set up a scene, you can check the Worlds tutorial."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const viewport = document.createElement("bim-viewport");\n\nconst components = new OBC.Components();\n\nconst worlds = components.get(OBC.Worlds);\n\nconst world = worlds.create<\n  OBC.SimpleScene,\n  OBC.SimpleCamera,\n  OBC.SimpleRenderer\n>();\n\nworld.name = "main";\n\nconst sceneComponent = new OBC.SimpleScene(components);\nsceneComponent.setup();\nworld.scene = sceneComponent;\n\nconst rendererComponent = new OBC.SimpleRenderer(components, viewport);\nworld.renderer = rendererComponent;\n\nconst cameraComponent = new OBC.SimpleCamera(components);\nworld.camera = cameraComponent;\nawait world.camera.controls.setLookAt(65, 19, -27, 12.6, -5, -1.4);\n\nviewport.addEventListener("resize", () => {\n  rendererComponent.resize();\n  cameraComponent.updateAspect();\n});\n\ncomponents.init();\n\nconst grids = components.get(OBC.Grids);\ngrids.create(world);\n\ncomponents.get(OBC.Clipper).create(world);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"setting-up-the-components",children:"Setting up the components"}),"\n",(0,o.jsxs)(n.p,{children:["First of all, we're going to get the ",(0,o.jsx)(n.code,{children:"FragmentIfcLoader"})," from an existing components instance:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const ifcLoader = components.get(OBC.IfcLoader);\nawait ifcLoader.setup();\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Just after we have setup the loader, let's then configure the ",(0,o.jsx)(n.code,{children:"FragmentManager"})," so any time a model is loaded it gets added to some world scene created before:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const fragments = components.get(OBC.FragmentsManager);\nfragments.init(\n  "https://thatopen.github.io/engine_fragment/resources/worker.mjs/worker.mjs",\n);\n\nworld.camera.controls.addEventListener("update", () =>\n  fragments.core.update(true),\n);\n\nfragments.list.onItemSet.add(({ value: model }) => {\n  model.useCamera(world.camera.three);\n  world.scene.three.add(model.object);\n  fragments.core.update(true);\n});\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"You don't need to add the model into the scene to display its properties. However, as we are going to display the properties for each selected element, then having the model into the scene is obvious, right?"})}),"\n",(0,o.jsx)(n.p,{children:"Now, the any Fragments Model loaded includes everything the Element Properties component needs in order to work! So the following is a piece of cake."}),"\n",(0,o.jsx)(n.h3,{id:"creating-the-properties-table",children:"Creating the properties table"}),"\n",(0,o.jsx)(n.p,{children:"Let's create an instance of the functional component, like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const [propertiesTable, updatePropertiesTable] = BUIC.tables.itemsData({\n  components,\n  modelIdMap: {},\n});\n\npropertiesTable.preserveStructureOnFilter = true;\npropertiesTable.indentationInText = false;\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Cool! properties table created. Then after, let's tell the properties table to update each time the user makes a selection over the model. For it, we will use the highlighter from ",(0,o.jsx)(n.code,{children:"@thatopen/components-front"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const highlighter = components.get(OBCF.Highlighter);\nhighlighter.setup({ world });\n\nhighlighter.events.select.onHighlight.add((modelIdMap) => {\n  updatePropertiesTable({ modelIdMap });\n});\n\nhighlighter.events.select.onClear.add(() =>\n  updatePropertiesTable({ modelIdMap: {} }),\n);\n"})}),"\n",(0,o.jsx)(n.h3,{id:"creating-a-panel-to-append-the-table",children:"Creating a panel to append the table"}),"\n",(0,o.jsx)(n.p,{children:"Allright! Let's now create a BIM Panel to control some aspects of the properties table and to trigger some functionalities like expanding the rows children and copying the values to TSV, so you can paste your element values inside a spreadsheet application \ud83d\ude09"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const propertiesPanel = BUI.Component.create(() => {\n  const [loadFragBtn] = BUIC.buttons.loadFrag({ components });\n\n  const onTextInput = (e: Event) => {\n    const input = e.target as BUI.TextInput;\n    propertiesTable.queryString = input.value !== "" ? input.value : null;\n  };\n\n  const expandTable = (e: Event) => {\n    const button = e.target as BUI.Button;\n    propertiesTable.expanded = !propertiesTable.expanded;\n    button.label = propertiesTable.expanded ? "Collapse" : "Expand";\n  };\n\n  const copyAsTSV = async () => {\n    await navigator.clipboard.writeText(propertiesTable.tsv);\n  };\n\n  return BUI.html`\n    <bim-panel label="Properties">\n      <bim-panel-section label="Element Data">\n        ${loadFragBtn}\n        <div style="display: flex; gap: 0.5rem;">\n          <bim-button @click=${expandTable} label=${propertiesTable.expanded ? "Collapse" : "Expand"}></bim-button> \n          <bim-button @click=${copyAsTSV} label="Copy as TSV"></bim-button> \n        </div> \n        <bim-text-input @input=${onTextInput} placeholder="Search Property" debounce="250"></bim-text-input>\n        ${propertiesTable}\n      </bim-panel-section>\n    </bim-panel>\n  `;\n});\n'})}),"\n",(0,o.jsx)(n.p,{children:"Finally, let's create a BIM Grid element and provide both the panel and the viewport to display everything."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const app = document.createElement("bim-grid") as BUI.Grid<["main"]>;\napp.layouts = {\n  main: {\n    template: `\n    "propertiesPanel viewport"\n    /25rem 1fr\n    `,\n    elements: { propertiesPanel, viewport },\n  },\n};\n\napp.layout = "main";\ndocument.body.append(app);\n'})}),"\n",(0,o.jsx)(n.p,{children:"Congratulations! You have now created a fully working properties table for your app in less than 5 minutes of work. Keep going with more tutorials! \ud83d\udcaa"})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var o=t(6540);const a={},r=o.createContext(a);function i(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);